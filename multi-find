#!/bin/bash

# Check for at least one search term
if [ "$#" -lt 1 ]; then
  echo "Usage: $0 term1 [term2 ... termN]"
  exit 1
fi

# Search through all terms
files="."
for term in "$@"; do
  if [ -n "$files" ]; then
    # Use the current file list as input to rg, only search those files
    files=$(echo "$files" | tr '\n' '\0' | xargs -0 rg -l "$term" 2>/dev/null || true)
  fi
  
  files=$(echo "$files" | sed 's|\\|/|g')
  echo "----------------------------------------"
  echo "Searching for: $term"
  echo "----------------------------------------"
  echo "Found files:"
  echo "$files"
  echo "----------------------------------------"
done